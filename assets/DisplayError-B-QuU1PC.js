import{R as g,r as c,j as V,v as q}from"./index-VnnWUwzb.js";var D={exports:{}},p={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y;function A(){if(y)return p;y=1;var t=g,r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,e={key:!0,ref:!0,__self:!0,__source:!0};function a(n,u,l){var f,m={},b=null,d=null;l!==void 0&&(b=""+l),u.key!==void 0&&(b=""+u.key),u.ref!==void 0&&(d=u.ref);for(f in u)o.call(u,f)&&!e.hasOwnProperty(f)&&(m[f]=u[f]);if(n&&n.defaultProps)for(f in u=n.defaultProps,u)m[f]===void 0&&(m[f]=u[f]);return{$$typeof:r,type:n,key:b,ref:d,props:m,_owner:i.current}}return p.Fragment=s,p.jsx=a,p.jsxs=a,p}D.exports=A();var N=D.exports;const P=N.jsx;class F extends Error{constructor(r){super(r),Object.setPrototypeOf(this,new.target.prototype),this.name=this.constructor.name}}const C=g.createContext(null),x=t=>!!(t&&typeof t.then=="function"),U=["onChange","onBlur","onSubmit"],R=(t,r)=>{if(!t)return;const s=[];let o;if(U.forEach(i=>{const e=t[i];if(e&&!o){const a=e(r);a&&(x(a)?s.push(a):o=a)}}),o)return o;if(s.length>0)return new Promise(i=>{Promise.all(s).then(e=>{i(e.find(Boolean))})})},h=(t,r)=>{const s=t.toString();return s?s.split(".").reduce((i,e)=>i==null?void 0:i[e],r):r},k=(t,r="")=>(r&&r+".")+t,O=(t,r)=>Object.entries(t).reduce((s,[o,i])=>{const e=k(o,r);if(!i)return s;const{onChange:a,onBlur:n,onSubmit:u,...l}=i;return{...s,[e]:{onChange:a,onBlur:n,onSubmit:u},...O(l,e)}},{}),T=(t,r)=>{const s=j(t),o=[],i=O(r);return Object.entries(i).forEach(([e,a])=>{const n=R(a,h(e,t.values));n&&(x(n)?o.push(n.then(u=>{s.errors[e]=u})):s.errors[e]=n)}),o.length>0?new Promise(e=>{Promise.all(o).then(()=>e(E(s)))}):E(s)},J=(t,r,s)=>{const o=r.toString().split("."),i={...t};let e=i;return o.forEach((a,n)=>{n===o.length-1?e[a]=s:(e[a]={...e[a]},e=e[a])}),i},L=(t,r,s,o,i)=>{const e=j(t);return e.values=J(e.values,r,s),e.dirty[r]=o,e.errors[r]=i,E(e)},j=t=>({...t,values:{...t.values},errors:{...t.errors},dirty:{...t.dirty}}),$=t=>Object.values(t.errors).some(r=>r!==void 0),E=t=>({...t,hasErrors:$(t),isDirty:Object.values(t.dirty).some(Boolean)}),H=t=>{const r=c.useRef(!0);c.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[]);const s=c.useCallback(e=>{r.current&&t.current.onChange(e)},[]),o=c.useCallback((e,a)=>{r.current&&Promise.resolve().then(()=>{var n,u;(u=(n=t.current).onSubmitFailed)==null||u.call(n,e,a)})},[]),i=c.useCallback(e=>{r.current&&Promise.resolve().then(()=>{var a,n;(n=(a=t.current).onSubmitFinished)==null||n.call(a,e)})},[]);return{onChange:s,onSubmitFinished:i,onSubmitFailed:o}},W=(t,r,s)=>{const o=c.useCallback((a,n,u)=>{const{data:l}=t.current;(h(a,l.values)!==n||u&&!l.errors[a])&&s(L(l,a,n,!I.comparator(n,h(a,r.current)),u))},[s]),i=c.useCallback((a,n,u)=>{var l,f;const{data:m,validation:b}=t.current,d=n==="onChange"?u:h(a,m.values),_=(f=(l=h(a,b))==null?void 0:l[n])==null?void 0:f.call(l,d);x(_)?(h(a,m.values)!==d&&o(a,d,void 0),_.then(S=>{h(a,t.current.data.values)===d&&o(a,d,S)})):o(a,d,_)},[o]),e=c.useRef(i);return e.current=i,e},Y=()=>{const t=c.useRef(!0);return t.current?(t.current=!1,!0):t.current},z=(t,r,s,o,i)=>{const e=c.useCallback(()=>{const n=E({...t.current.data,isSubmitting:!1,dirty:{}});s(n.values),r(n),o(n)},[r,o]),a=c.useCallback(n=>{if(!n.hasErrors)new Promise(u=>{var l,f;return u((f=(l=t.current).onSubmit)==null?void 0:f.call(l,n.values))}).then(e).catch(u=>{const l={...t.current.data,isSubmitting:!1};r(l),i(u,l)});else{const u={...n,isSubmitting:!1};r(u),i(new F("validation failed"),u)}},[e,r,i]);return c.useCallback(n=>{n==null||n.preventDefault();const{data:u,validation:l}=t.current;r({...u,isSubmitting:!0});const f=l?T(u,l):u;x(f)?f.then(m=>{a(m)}):a(f)},[a,r])},G=({className:t,children:r,version:s,...o},i)=>{const e=c.useRef(o.data.values),a=c.useCallback(v=>{e.current=v},[]),n=c.useRef(o);n.current=o;const{onChange:u,onSubmitFinished:l,onSubmitFailed:f}=H(n),m=W(n,e,u),b=z(n,u,a,l,f),[d,_]=c.useState(()=>({getData:()=>n.current.data,update:(...v)=>m.current(...v),isRequired:v=>!!R(h(v,n.current.validation)),clearErrors:v=>n.current.onChange(ot.clearErrors(n.current.data,v))})),S=Y();c.useEffect(()=>{S||_(v=>({...v}))},[o.data]),c.useEffect(()=>{S||(a(n.current.data.values),u(E({...n.current.data,errors:{},dirty:{}})))},[s]),c.useImperativeHandle(i,()=>({submit:()=>b(),updateInitialData:v=>{e.current=v(e.current)}}),[b]);const{Provider:M}=C;return P("form",{className:t,onSubmit:b,noValidate:!0,children:P(M,{value:d,children:r})})},Q=g.forwardRef(G),X=t=>{const{update:r,getData:s,isRequired:o}=c.useContext(C),i=s();return{onChange:c.useCallback(e=>r(t,"onChange",e),[r,t]),onBlur:c.useCallback(()=>r(t,"onBlur",void 0),[r,t]),value:h(t,i.values),error:i.errors[t],dirty:!!i.dirty[t],required:o(t),name:t.toString()}},w=(t="")=>new Proxy({},{get(r,s){return s==="toString"||typeof s=="symbol"?()=>t:(r[s]||(r[s]=w(k(s,t))),r[s])}}),Z=()=>c.useMemo(()=>({fields:w(),Form:Q}),[]),K=t=>({values:t,errors:{},hasErrors:!1,dirty:{},isDirty:!1,isSubmitting:!1}),tt=({hasErrors:t,isDirty:r,isSubmitting:s},{skipDirty:o}={})=>t||s||!(r||o),rt=t=>t instanceof F,et=(t,r)=>{const s=Object.entries(t.errors).filter(([i,e])=>e&&!i.startsWith(r.toString())),o=Object.fromEntries(s);return{...t,errors:o,hasErrors:!!s.length}},nt=()=>c.useContext(C).clearErrors,B={comparator:(t,r)=>t===r},I={comparator:B.comparator},st=({comparator:t=B.comparator})=>{I.comparator=t},ot={configure:st,useForm:Z,useField:X,initialData:K,notSubmittable:tt,isValidationError:rt,clearErrors:et,useClearErrors:nt},at=(t,{preventDefault:r=!0}={})=>s=>{r&&s.preventDefault();const o=s.target.value;t(o)},ut=t=>t.preventDefault(),ct={inputHandler:at,preventDefault:ut},lt=({error:t})=>V.jsx("span",{className:"invalid-feedback",children:q(t)});export{lt as D,ct as E,ot as M};
