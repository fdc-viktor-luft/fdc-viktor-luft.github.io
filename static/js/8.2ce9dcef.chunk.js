(this.webpackJsonpgithub_homepage=this.webpackJsonpgithub_homepage||[]).push([[8],{29:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return f}));var a=n(2),r=n(0),c=n.n(r),s=n(14),l=n(1),o=n(3),u=n(9),i=function(e){var t=e.onClick,n=e.description,a=e.children,r=e.className;return c.a.createElement("div",{className:u.a.classNames("footer-action",r,!t&&"no-handler"),onClick:t},a,n&&c.a.createElement("div",{className:"small"},Object(l.a)(n)))},d=function(){return c.a.createElement(i,{onClick:o.a.back,description:"APP.home"},c.a.createElement(s.a.Home,null))},m=function(e){return document.getElementById("root").style.setProperty("--footer-height",e?"3rem":"0px")},f=function(e){var t=e.children,n=e.expandable,l=e.hideHome,o=e.className,u=Object(r.useState)(!0),i=Object(a.a)(u,2),f=i[0],v=i[1],b=Object(r.useCallback)((function(){return v((function(e){return!e}))}),[]);return Object(r.useEffect)((function(){n||v(!0)}),[n]),Object(r.useEffect)((function(){m(f)}),[f]),Object(r.useEffect)((function(){return function(){return m(!1)}}),[]),f?c.a.createElement("footer",{className:o},n&&c.a.createElement("div",{className:"footer-handle",onClick:b},c.a.createElement(s.a.ChevronDown,null)),c.a.createElement("div",{className:"footer-border"}),c.a.createElement("nav",null,c.a.createElement("div",{className:"footer-actions"},l||c.a.createElement(d,null),t))):c.a.createElement("footer",{className:o},c.a.createElement("div",{className:"footer-handle closed",onClick:b},c.a.createElement(s.a.ChevronUp,null)))}},40:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(33),r=n(34),c=n(39),s=n(38),l=n(0),o=n.n(l),u=n(1),i=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={hasError:!1},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this.state.hasError,t=this.props,n=t.children,a=t.fix;return e?o.a.createElement("div",{className:"game-error"},o.a.createElement("h2",null,Object(u.a)("error.boundary.unexpected")),o.a.createElement("p",null,Object(u.a)("error.boundary.sorry")),o.a.createElement("button",{type:"button",onClick:a},Object(u.a)("error.boundary.fix"))):n}}]),n}(l.Component);i.getDerivedStateFromError=function(){return{hasError:!0}}},41:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(0),r=n.n(a),c=n(14),s=n(29),l=function(e){var t=e.onClick;return r.a.createElement(s.b,{onClick:t,description:"APP.restart"},r.a.createElement(c.a.PowerOff,null))}},43:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return m}));var a=n(51),r=n(0),c=n.n(r),s=n(1),l=n(48),o=n(49),u=n(9),i=function(e,t){return function(n){return e(t?n&&n.trim():n)}},d=function(e){var t=e.value,n=e.label,a=e.placeholder,r=e.error,d=e.required,m=e.className,f=e.inputClassName,v=e.onChange,b=e.onBlur,E=e.onFocus,O=e.autoFocus,g=e.disabled,j=e.type,p=void 0===j?"text":j,h=e.trim,N=e.name,C=e.forwardedRef,w=e.readOnly;return c.a.createElement("div",{className:u.a.classNames(m,d&&"required")},n&&c.a.createElement("label",null,Object(s.a)(n)),c.a.createElement("input",Object.assign({name:N,className:u.a.classNames(f,r&&"is-invalid"),onChange:v&&o.a.inputHandler(i(v,h)),onBlur:b&&o.a.inputHandler(i(b,h)),onFocus:E,placeholder:a&&Object(s.b)(a),ref:C,readOnly:w},{value:t,autoFocus:O,disabled:g,type:p})),r&&c.a.createElement(l.a,{error:r}))},m=function(e){var t=e.Field,n=e.className,r=void 0===n?"form-control":n,s=Object(a.a)(e,["Field","className"]);return c.a.createElement(t,null,(function(e){var t=e.onChange,n=e.onBlur,a=e.required,l=e.value,o=e.error;return c.a.createElement(d,Object.assign({required:a,onBlur:n,onChange:t,className:r,value:l,error:o},s))}))}},48:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(0),r=n.n(a),c=n(1),s=function(e){var t=e.error;return r.a.createElement("span",{className:"invalid-feedback"},Object(c.a)(t))}},49:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={inputHandler:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.preventDefault,a=void 0===n||n;return function(t){a&&t.preventDefault();var n=t.target.value;e(n)}},preventDefault:function(e){return e.preventDefault()}}},91:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),s=n(40),l=n(2),o=n(10),u=n(15),i=[[],[],[],[]],d={results:{losses:0,wins:0},me:{knowledge:i,round:0},enemy:{knowledge:i,round:0}},m=Object(u.a)(function(){try{var e=o.a.get("decrypto");if(e)return JSON.parse(e)}catch(t){}return d}()),f=Object(l.a)(m,2),v=f[0],b=f[1],E=function(e){var t;b.set(e),t=b.get(),o.a.set("decrypto",JSON.stringify(t))},O={set:E,reset:function(){return E(d)}},g=n(9),j=n(6),p=n(30),h=n(43),N=n(47),C=n(14),w=n(1),k={first:"",second:"",third:""},y={values:k,errors:{}},S=N.a.create(k),W=S.Form,R=S.Fields,F=function(e){if(!e||!e.trim())return{id:"DECRYPTO.codeWord.required"};try{btoa(e)}catch(t){return{id:"DECRYPTO.codeWord.invalid"}}},D={first:{onChange:F},second:{onChange:F},third:{onChange:F}},T=function(e){var t=e.onSubmit,n=e.code,a=Object(r.useState)(y),s=Object(l.a)(a,2),o=s[0],u=s[1];return c.a.createElement("div",{className:"code-words-selection"},n&&c.a.createElement("div",{className:"code"},c.a.createElement("span",null,n.join("."))),c.a.createElement(W,{onChange:u,data:o,onSubmit:t,validation:D},c.a.createElement(h.a,{Field:R.first}),c.a.createElement(h.a,{Field:R.second}),c.a.createElement(h.a,{Field:R.third}),c.a.createElement("button",{type:"submit",disabled:N.a.hasErrors(o)},c.a.createElement(C.a.Mask,null),c.a.createElement("div",{className:"description"},Object(w.a)("DECRYPTO.btn.submit")))))},P=function(e){var t=e.value,n=e.children,a=e.onChange,s=e.close,l=Object(r.useCallback)((function(){a(t),s()}),[a,s,t]);return c.a.createElement("div",{className:"value",onClick:l},n)},Y=function(e){var t=e.children,n=e.options,a=e.onChange,s=Object(r.useState)(!1),o=Object(l.a)(s,2),u=o[0],i=o[1],d=Object(r.useCallback)((function(){return i(!1)}),[]),m=Object(r.useCallback)((function(){return i(!0)}),[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{onClick:m},t),u&&c.a.createElement("div",{className:"select-overlay"},c.a.createElement("div",{className:"select-overlay-inner"},n.map((function(e,t){var n=e.value,r=e.node;return c.a.createElement(P,{key:t,close:d,onChange:a,value:n},r)}))),c.a.createElement("div",{className:"select-overlay-outer",onClick:d})))},q=[{value:1,node:1},{value:2,node:2},{value:3,node:3},{value:4,node:4}],x=function(e){var t=e.onSubmit,n=e.codeWords,a=Object(r.useState)(),s=Object(l.a)(a,2),o=s[0],u=s[1],i=Object(r.useState)(),d=Object(l.a)(i,2),m=d[0],f=d[1],v=Object(r.useState)(),b=Object(l.a)(v,2),E=b[0],O=b[1],j=function(e,t,n){var a=function(e,t,n){return e&&e===t?e:!n||n!==t&&n!==e?void 0:n}(e,t,n);return a?[a===e,a===t,a===n]:[!1,!1,!1]}(o,m,E),p=Object(r.useMemo)((function(){return!!(o&&m&&E&&o!==m&&o!==E&&m!==E)}),[o,m,E]),h=Object(r.useCallback)((function(){t([o,m,E])}),[t,o,m,E]);return c.a.createElement("div",{className:"guessing"},c.a.createElement("div",{className:"guess"},c.a.createElement("div",{className:"code-word"},n.first),c.a.createElement(Y,{options:q,onChange:u},c.a.createElement("span",{className:g.a.classNames("code-guess",j[0]&&"invalid")},null!==o&&void 0!==o?o:"?"))),c.a.createElement("div",{className:"guess"},c.a.createElement("div",{className:"code-word"},n.second),c.a.createElement(Y,{options:q,onChange:f},c.a.createElement("span",{className:g.a.classNames("code-guess",j[1]&&"invalid")},null!==m&&void 0!==m?m:"?"))),c.a.createElement("div",{className:"guess"},c.a.createElement("div",{className:"code-word"},n.third),c.a.createElement(Y,{options:q,onChange:O},c.a.createElement("span",{className:g.a.classNames("code-guess",j[2]&&"invalid")},null!==E&&void 0!==E?E:"?"))),p&&c.a.createElement("button",{onClick:h,type:"button"},c.a.createElement(C.a.Key,null),c.a.createElement("div",{className:"description"},Object(w.a)("DECRYPTO.btn.decode"))))},A=function(e){var t=e.codeWords,n=e.code,a=e.guessed,r=a[0]!==n[0],s=a[1]!==n[1],l=a[2]!==n[2];return c.a.createElement("div",{className:"guessed"},c.a.createElement("div",{className:"guess"},c.a.createElement("div",{className:"code-word"},t.first),c.a.createElement("span",{className:g.a.classNames("code-guess",r?"invalid":"valid")},a[0]),r&&c.a.createElement("span",{className:"code-was"},n[0])),c.a.createElement("div",{className:"guess"},c.a.createElement("div",{className:"code-word"},t.second),c.a.createElement("span",{className:g.a.classNames("code-guess",s?"invalid":"valid")},a[1]),s&&c.a.createElement("span",{className:"code-was"},n[1])),c.a.createElement("div",{className:"guess"},c.a.createElement("div",{className:"code-word"},t.third),c.a.createElement("span",{className:g.a.classNames("code-guess",l?"invalid":"valid")},a[2]),l&&c.a.createElement("span",{className:"code-was"},n[2])))},M=function(e){var t=e.knowledge,n=Object(r.useMemo)((function(){for(var e=[],n=t.reduce((function(e,t){return Math.max(e,t.length)}),0),a=function(n){e.push(c.a.createElement("tr",{key:n},t.map((function(e,t){return c.a.createElement("td",{key:t},e[n])}))))},r=0;r<n;r++)a(r);return e}),[t]);return c.a.createElement("div",{className:"knowledge"},c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("td",null,"1"),c.a.createElement("td",null,"2"),c.a.createElement("td",null,"3"),c.a.createElement("td",null,"4"))),c.a.createElement("tbody",null,n)))},H=n(62),J=n.n(H),U={white:{dark:"#FFF",light:"#0000"},black:{dark:"#000",light:"#0000"}},B=function(e){var t=e.info,n=e.options,a=Object(r.useState)(),s=Object(l.a)(a,2),o=s[0],u=s[1],i=Object(r.useRef)(null);return Object(r.useEffect)((function(){J.a.toCanvas(i.current,t,n,(function(e){e&&u(e)}))}),[t,n]),o?c.a.createElement(c.a.Fragment,null,"Ups, something went wrong (Code: QR1)"):c.a.createElement("canvas",{ref:i})},I=n(88),L=function(e){var t=e.onInput,n=e.prepareClose,a=Object(r.useState)(!1),s=Object(l.a)(a,2),o=s[0],u=s[1],i=Object(r.useState)(),d=Object(l.a)(i,2),m=d[0],f=d[1],v=Object(r.useState)(),b=Object(l.a)(v,2),E=b[0],O=b[1],g=Object(r.useRef)();g.current=E;var j=Object(r.useMemo)((function(){return{width:window.innerWidth,height:window.innerHeight}}),[]),p=j.width,h=j.height,N=Object(r.useRef)(null),C=Object(r.useRef)(null),k=Object(r.useRef)(!1),y=Object(r.useRef)(!1),S=Object(r.useRef)((function(){})),W=Object(r.useCallback)((function(){g.current.getTracks().forEach((function(e){return g.current.removeTrack(e)})),C.current.srcObject=null,C.current.src=""}),[]);Object(r.useEffect)((function(){navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"environment"}}).then(O).catch((function(e){"NotAllowedError"===e.name?u(!0):f(e)}))}),[W]),Object(r.useEffect)((function(){n&&(C.current.pause(),W())}),[n,W]);var R=Object(r.useCallback)((function(){window.requestAnimationFrame(S.current)}),[]);Object(r.useEffect)((function(){var e=C.current;E&&!k.current&&(k.current=!0,"srcObject"in e?e.srcObject=E:e.src=window.URL.createObjectURL(E),e.setAttribute("autoplay",""),e.setAttribute("muted",""),e.setAttribute("playsinline",""),R())}),[R,E]);var F=Object(r.useCallback)((function(e,a){if(e||n)return R();try{var r=JSON.parse(atob(a.result)),c=r.code,s=r.codeWords;c.every((function(e){return"number"===typeof e}))&&"string"===typeof s.first&&"string"===typeof s.second&&"string"===typeof s.third&&(y.current||(y.current=!0,t({code:c,codeWords:s})))}catch(l){}R()}),[t,R,n]);return S.current=Object(r.useCallback)((function(){var e=N.current&&N.current.getContext("2d");if(e){var t=new I.a;e.drawImage(C.current,0,0,p,h,0,0,p,h);var n=e.getImageData(0,0,p,h);t.callback=F,t.decode(n)}}),[F,h,p]),o?c.a.createElement(c.a.Fragment,null,Object(w.a)("media.camAccess.required")):m?c.a.createElement(c.a.Fragment,null,"Ups, something went wrong (Code: QR2)"):c.a.createElement("div",{className:"scanner"},E&&c.a.createElement("div",null,c.a.createElement("video",{ref:C}),c.a.createElement("canvas",{width:p,height:h,ref:N})))},Q={info:null,scanning:!1,closingScanner:!1},_=Object(u.a)(Q),G=Object(l.a)(_,2),K=G[0],z=G[1],V=function(){var e=z.get(),t=e.closingScanner,n=e.scanning;t||(n?(z.set({closingScanner:!0}),setTimeout((function(){return z.set(Q)}),1e3)):z.set(Q))},X=function(e){var t=e.code,n=e.codeWords;V(),O.set((function(e){var a=e.enemy;return{enemy:Object(p.a)({},a,{code:t,codeWords:n,round:a.round+1})}}))},Z=function(){var e=K((function(e){return e})),t=e.info,n=e.scanning,a=e.closingScanner,r=Math.min(window.innerWidth,window.innerHeight);return t?c.a.createElement("div",{className:"qr-code"},c.a.createElement(B,{info:t,options:{color:U.black,width:r}}),c.a.createElement("button",{onClick:V},c.a.createElement(C.a.Times,null))):n?c.a.createElement("div",{className:"qr-scanning",style:a?{display:"none"}:void 0},c.a.createElement(L,{onInput:X,prepareClose:a}),c.a.createElement("button",{onClick:V},c.a.createElement(C.a.Times,null))):null},$=function(e){var t=e.codeWords,n=e.code,a=Object(r.useCallback)((function(){return e=btoa(JSON.stringify({code:n,codeWords:t})),z.set({info:e});var e}),[n,t]);return c.a.createElement("button",{className:"open-qr-code",onClick:a,type:"button"},c.a.createElement(C.a.QrCode,null),c.a.createElement("div",{className:"description"},Object(w.a)("DECRYPTO.btn.transfer")))},ee=function(){return O.set((function(e){var t=e.me;return{me:Object(p.a)({},t,{code:g.a.arrayShuffle([1,2,3,4]).slice(0,3),codeWords:void 0,guessed:void 0,round:t.round+1})}}))},te=function(e){return O.set((function(t){var n=t.me;return{me:Object(p.a)({},n,{codeWords:e})}}))},ne=function(e){return O.set((function(t){var n=t.me,a=t.results,r=a.wins,c=a.losses,s=n.codeWords,l=n.code,o=s,u=o.first,i=o.second,d=o.third,m=e[0]!==l[0]||e[1]!==l[1]||e[2]!==l[2],f=Object(j.a)(n.knowledge).map((function(e){return Object(j.a)(e)}));f[l[0]-1].push(u),f[l[1]-1].push(i),f[l[2]-1].push(d);var v={me:Object(p.a)({},n,{knowledge:f,guessed:e})};return m?Object(p.a)({},v,{results:{wins:r,losses:c+1}}):v}))},ae=function(){var e=v((function(e){return e.me})),t=e.code,n=e.codeWords,a=e.guessed,r=e.knowledge,s=e.round,l=v((function(e){var t=e.enemy,n=t.guessed,a=t.round,r=e.me,c=e.results,s=c.wins,l=c.losses,o=n?a:a-1,u=r.round;return l>1||s>1||u>0&&o!==u})),o=!t||!!(t&&n&&a);return c.a.createElement(c.a.Fragment,null,s>0&&c.a.createElement("div",{className:"round"},Object(w.a)("DECRYPTO.round")," ",s),o&&c.a.createElement("div",{className:"generate-code"},c.a.createElement("button",{onClick:ee,type:"button",disabled:l},"?.?.?",c.a.createElement("div",{className:"description"},Object(w.a)("DECRYPTO.btn.generate")))),t&&!n&&c.a.createElement(T,{onSubmit:te,code:t}),t&&n&&!a&&c.a.createElement(x,{onSubmit:ne,codeWords:n}),t&&n&&a&&c.a.createElement(A,{codeWords:n,code:t,guessed:a}),t&&n&&c.a.createElement($,{code:t,codeWords:n}),c.a.createElement(M,{knowledge:r}))},re=function(e){return O.set((function(t){var n=t.enemy,a=t.results,r=a.wins,c=a.losses,s=n.codeWords,l=n.code,o=s,u=o.first,i=o.second,d=o.third,m=e[0]===l[0]&&e[1]===l[1]&&e[2]===l[2],f=Object(j.a)(n.knowledge).map((function(e){return Object(j.a)(e)}));f[l[0]-1].push(u),f[l[1]-1].push(i),f[l[2]-1].push(d);var v={enemy:Object(p.a)({},n,{knowledge:f,guessed:e})};return m?Object(p.a)({},v,{results:{wins:r+1,losses:c}}):v}))},ce=function(){var e=v((function(e){return e.enemy})),t=e.code,n=e.codeWords,a=e.guessed,s=e.knowledge,l=e.round,o=v((function(e){var t=e.me,n=t.round,a=t.codeWords,r=e.enemy,c=e.results;c.wins,c.losses;return(a?n:n-1)<=r.round})),u=Object(r.useCallback)((function(){var e;e={code:void 0,codeWords:void 0,guessed:void 0},O.set((function(t){var n=t.enemy;return{enemy:Object(p.a)({},n,{},e)}})),z.set({scanning:!0})}),[]),i=!t||!!(t&&n&&a);return c.a.createElement(c.a.Fragment,null,l>0&&c.a.createElement("div",{className:"round"},Object(w.a)("DECRYPTO.round")," ",l),i&&c.a.createElement("div",{className:"scan-code"},c.a.createElement("button",{onClick:u,type:"button",disabled:o},c.a.createElement(C.a.Glasses,null),c.a.createElement("div",{className:"description"},Object(w.a)("DECRYPTO.btn.catch")))),t&&n&&!a&&c.a.createElement(x,{onSubmit:re,codeWords:n}),t&&n&&a&&c.a.createElement(A,{codeWords:n,code:t,guessed:a}),c.a.createElement(M,{knowledge:s}))};!function(e){e.WON="WON",e.LOST="LOST"}(a||(a={}));var se=function(){var e=Object(r.useState)(),t=Object(l.a)(e,2),n=t[0],s=t[1],o=v((function(e){return e.results})),u=o.wins,i=o.losses,d=Object(r.useRef)({wins:u,losses:i}),m=Object(r.useCallback)((function(){return s(void 0)}),[]);return Object(r.useEffect)((function(){1===d.current.wins&&2===u?s(a.WON):1===d.current.losses&&2===i&&s(a.LOST),d.current={wins:u,losses:i}}),[u,i]),n?c.a.createElement("div",{className:"result-overlay",onClick:m},c.a.createElement("span",null,Object(w.a)(n===a.WON?"DECRYPTO.won":"DECRYPTO.lost"))):null},le=function(){var e=Object(r.useState)(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],s=v((function(e){return e.results})),o=s.losses,u=s.wins,i=Object(r.useCallback)((function(){return a((function(e){return!e}))}),[]);return c.a.createElement("div",{className:g.a.classNames("decrypto",n&&"enemy",o>0&&"alarm",u>0&&"success")},c.a.createElement("div",{className:"decrypto-inner"},c.a.createElement(se,null),c.a.createElement("div",{className:"navigation"},c.a.createElement("button",{type:"button",onClick:i},c.a.createElement(C.a.Exchange,null))),c.a.createElement("div",{className:"content"},n?c.a.createElement(ce,null):c.a.createElement(ae,null)),c.a.createElement(Z,null)))},oe=n(29),ue=n(41),ie=function(){return c.a.createElement(oe.a,null,c.a.createElement(ue.a,{onClick:O.reset}))};t.default=function(){return c.a.createElement(s.a,{fix:O.reset},c.a.createElement(le,null),c.a.createElement(ie,null))}}}]);