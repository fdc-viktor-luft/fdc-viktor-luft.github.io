(this.webpackJsonpgithub_homepage=this.webpackJsonpgithub_homepage||[]).push([[9],{49:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var c={O:"#d65c0c",B:"#0f63ff",G:"#03860b",R:"#cd0b1b",Y:"#ffdf10"}},50:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var c=a(0),r=a.n(c),n=a(49),l=[r.a.createElement("text",{x:"110",y:"420",fontSize:"500",key:"0"},"?"),r.a.createElement("circle",{cx:"250",cy:"250",r:"50",fill:"black",key:"1"}),r.a.createElement("g",{fill:"black",key:"2"},r.a.createElement("circle",{cx:"125",cy:"375",r:"50"}),r.a.createElement("circle",{cx:"375",cy:"125",r:"50"})),r.a.createElement("g",{fill:"black",key:"3"},r.a.createElement("circle",{cx:"125",cy:"375",r:"50"}),r.a.createElement("circle",{cx:"250",cy:"250",r:"50"}),r.a.createElement("circle",{cx:"375",cy:"125",r:"50"})),r.a.createElement("g",{fill:"black",key:"4"},r.a.createElement("circle",{cx:"125",cy:"375",r:"50"}),r.a.createElement("circle",{cx:"125",cy:"125",r:"50"}),r.a.createElement("circle",{cx:"375",cy:"375",r:"50"}),r.a.createElement("circle",{cx:"375",cy:"125",r:"50"})),r.a.createElement("g",{fill:"black",key:"5"},r.a.createElement("circle",{cx:"125",cy:"375",r:"50"}),r.a.createElement("circle",{cx:"125",cy:"125",r:"50"}),r.a.createElement("circle",{cx:"250",cy:"250",r:"50"}),r.a.createElement("circle",{cx:"375",cy:"375",r:"50"}),r.a.createElement("circle",{cx:"375",cy:"125",r:"50"})),r.a.createElement("g",{fill:"black",key:"6"},r.a.createElement("circle",{cx:"125",cy:"400",r:"50"}),r.a.createElement("circle",{cx:"125",cy:"250",r:"50"}),r.a.createElement("circle",{cx:"125",cy:"100",r:"50"}),r.a.createElement("circle",{cx:"375",cy:"400",r:"50"}),r.a.createElement("circle",{cx:"375",cy:"250",r:"50"}),r.a.createElement("circle",{cx:"375",cy:"100",r:"50"}))],i=function(e){var t=e.count,a=e.color,c=void 0!==t?l[t]:void 0;return r.a.createElement("div",{className:"cube"},r.a.createElement("svg",{className:"icon",viewBox:"0 0 500 500"},r.a.createElement("rect",{x:"0",y:"0",width:"500",height:"500",rx:"100",ry:"100",fill:"white"}),c||r.a.createElement("g",{stroke:a&&n.a[a]||"black",strokeWidth:"100"},r.a.createElement("line",{x1:"80",y1:"80",x2:"420",y2:"420"}),r.a.createElement("line",{x1:"80",y1:"420",x2:"420",y2:"80"}))))}},89:function(e,t,a){"use strict";a.r(t);var c,r,n=a(0),l=a.n(n),i=a(37),u=a(26),m=a(39),s=a(38),o=a(5),E=a(27),b=a(2),f=a(28),y=a(9),v=a(13),d=a(47),O=a(8);!function(e){e.M1="M1",e.M2="M2",e.M3="M3",e.M4="M4",e.M5="M5",e.M6="M6",e.TRIPLE="TRIPLE",e.FOURSOME="FOURSOME",e.FULL_HOUSE="FULL_HOUSE",e.SMALL_STREET="SMALL_STREET",e.BIG_STREET="BIG_STREET",e.SENSATION="SENSATION",e.CHANCE="CHANCE"}(r||(r={}));var p,M=(c={},Object(f.a)(c,r.M1,{multiplier:1}),Object(f.a)(c,r.M2,{multiplier:2}),Object(f.a)(c,r.M3,{multiplier:3}),Object(f.a)(c,r.M4,{multiplier:4}),Object(f.a)(c,r.M5,{multiplier:5}),Object(f.a)(c,r.M6,{multiplier:6}),Object(f.a)(c,r.TRIPLE,{}),Object(f.a)(c,r.FOURSOME,{}),Object(f.a)(c,r.FULL_HOUSE,{fixedValue:25}),Object(f.a)(c,r.SMALL_STREET,{fixedValue:30}),Object(f.a)(c,r.BIG_STREET,{fixedValue:40}),Object(f.a)(c,r.SENSATION,{fixedValue:50}),Object(f.a)(c,r.CHANCE,{}),c),j={players:[]},k=function(){try{var e=y.a.get("gimmick");return JSON.parse(e)}catch(t){return[]}},g=Object(v.a)(k()[0]||j),h=Object(b.a)(g,2),S=h[0],x=h[1],N=function(e){x.set(e);var t=x.get(),a=k();a.unshift(t),a.length>20&&a.pop(),y.a.set("gimmick",JSON.stringify(a))},C=function(e){return Object(E.a)({},e,{points:{}})},I=function(e){var t=Math.min.apply(Math,Object(o.a)(e.map((function(e){var t=e.points;return Object.keys(t).length}))));return e.find((function(e){var a=e.points;return Object.keys(a).length===t}))},R=function(e,t){return t.every((function(t){return void 0!==e[t]}))},T=function(e){return O.a.sum(e[r.M1],e[r.M2],e[r.M3],e[r.M4],e[r.M5],e[r.M6])>=63?35:0},L=function(e){var t=e.points;return O.a.sum.apply(O.a,Object(o.a)(Object.values(t)))+T(t)},F={restart:function(){N(j)},undo:function(){var e=k();if(e.length>1){e.shift(),y.a.set("gimmick",JSON.stringify(e));var t=e[0];x.set(t)}},selectPlayers:function(e){var t=d.a.get().players.slice(0,e).map(C);N({players:t})},selectValue:function(e,t){var a=M[t].multiplier,c=a?a*e:e,r=I(x.get().players);r.points[t]=c,function(e){N((function(t){var a=t.players,c=Object(o.a)(a),r=c.findIndex((function(t){return t.uuid===e.uuid}));return c[r]=e,{players:c}}))}(r)},getCurrentActivePlayer:I,calculateSum:L,calculateBonus:T,finishedMultiplier:function(e){return R(e,Object.values(r).slice(0,6))},allFinished:function(e){return e.every((function(e){return t=e.points,R(t,Object.values(r));var t}))},playerWithMostPoints:function(e){var t,a=e.map((function(e){return{player:e,sum:L(e)}})),c=Math.max.apply(Math,Object(o.a)(a.map((function(e){return e.sum}))));return null===(t=a.find((function(e){return e.sum===c})))||void 0===t?void 0:t.player}},P=a(44),w=a(40),A=a(1),G=a(58),_={numberOfPlayers:{onChange:function(e){var t=Number(e);return isNaN(t)||t<1||t>10?{id:"players.count.invalid",values:{min:1,max:10}}:t>d.a.get().players.length?{id:"players.count.exceedsRegistered"}:void 0}}},U=function(e){var t=e.numberOfPlayers;F.selectPlayers(+t)},K={numberOfPlayers:""},H=P.a.create(K),B=H.Form,V=H.Fields,J=function(){var e=Object(n.useState)({values:K,errors:{}}),t=Object(b.a)(e,2),a=t[0],c=t[1];return l.a.createElement("div",{className:"spade-is-trump"},l.a.createElement("div",{className:"configs"},l.a.createElement(B,{className:"startup",onSubmit:U,validation:_,data:a,onChange:c},l.a.createElement(w.a,{Field:V.numberOfPlayers,label:"players.count",type:"number"}),l.a.createElement("button",{type:"submit"},Object(A.a)("APP.start")))),l.a.createElement(G.a,null))},W=a(53),z={num:{onSubmit:function(e){var t=Number(e);if(isNaN(t)||t<5||t>30)return{id:"GIMMICK.value.invalid",values:{min:5,max:30}}}}},Y={num:""},q=P.a.create(Y),D=q.Form,Q=q.Fields,X=function(e){var t=e.value,a=e.gimmickRow,c=e.close,r=Object(n.useState)({values:Y,errors:{}}),i=Object(b.a)(r,2),u=i[0],m=i[1],s=Object(n.useCallback)((function(){F.selectValue(t,a),c()}),[t,a,c]),o=Object(n.useCallback)((function(e){var t=e.num;F.selectValue(+t,a),c()}),[a,c]);return l.a.createElement("div",{className:O.a.classNames("value",-1===t&&"no-hover"),onClick:-1===t?void 0:s},-1===t?l.a.createElement(D,{onSubmit:o,validation:z,data:u,onChange:m},l.a.createElement(w.a,{Field:Q.num,type:"number",autoFocus:!0})):0===t?"\u2718":t>10?"\u2713":t)},Z=function(e){var t=e.gimmickRow,a=e.close,c=M[t],r=c.multiplier,n=c.fixedValue;return l.a.createElement("div",{className:"select-overlay"},l.a.createElement("div",{className:"select-overlay-inner"},r?[0,1,2,3,4,5].map((function(e){return l.a.createElement(X,{key:e,gimmickRow:t,value:e,close:a})})):n?[0,n].map((function(e){return l.a.createElement(X,{key:e,gimmickRow:t,value:e,close:a})})):[0,-1].map((function(e){return l.a.createElement(X,{key:e,gimmickRow:t,value:e,close:a})}))),l.a.createElement("div",{className:"select-overlay-outer",onClick:a}))},$=a(50),ee=(p={},Object(f.a)(p,r.M1,l.a.createElement($.a,{count:1})),Object(f.a)(p,r.M2,l.a.createElement($.a,{count:2})),Object(f.a)(p,r.M3,l.a.createElement($.a,{count:3})),Object(f.a)(p,r.M4,l.a.createElement($.a,{count:4})),Object(f.a)(p,r.M5,l.a.createElement($.a,{count:5})),Object(f.a)(p,r.M6,l.a.createElement($.a,{count:6})),Object(f.a)(p,r.TRIPLE,Object(A.b)("GIMMICK.triple")),Object(f.a)(p,r.FOURSOME,Object(A.b)("GIMMICK.foursome")),Object(f.a)(p,r.FULL_HOUSE,Object(A.b)("GIMMICK.fullHouse")),Object(f.a)(p,r.SMALL_STREET,Object(A.b)("GIMMICK.smallStreet")),Object(f.a)(p,r.BIG_STREET,Object(A.b)("GIMMICK.bigStreet")),Object(f.a)(p,r.SENSATION,Object(A.b)("GIMMICK.sensation")),Object(f.a)(p,r.CHANCE,Object(A.b)("GIMMICK.chance")),p),te=function(e){var t=e.row,a=e.players,c=e.activePlayer,r=e.onClick;return l.a.createElement("tr",null,l.a.createElement("td",{className:"first"},ee[t]),a.map((function(e){var a=e.points,n=e.uuid;return l.a.createElement("td",{className:O.a.classNames(c.uuid===n||"inactive"),key:n,onClick:void 0===a[t]&&c.uuid===n?function(){return r(t)}:void 0},0===a[t]?"\u2718":a[t])})))},ae=function(){var e=Object(n.useState)(),t=Object(b.a)(e,2),a=t[0],c=t[1],i=Object(n.useCallback)((function(){return c(void 0)}),[]),u=S((function(e){return e.players})),m=F.getCurrentActivePlayer(u),s=Object.values(r).slice(0,6),o=Object.values(r).slice(6),E=S((function(e){var t=e.players;return F.allFinished(t)?F.playerWithMostPoints(t):void 0}));return l.a.createElement(l.a.Fragment,null,l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{className:"first"}),u.map((function(e,t){var a=e.name,c=e.shortcut,r=e.uuid;return l.a.createElement(W.a,{desc:a,short:l.a.createElement("span",null,c),key:t,tag:"th",className:O.a.classNames(!E&&m.uuid===r&&"active",(null===E||void 0===E?void 0:E.uuid)===r&&"winner")})})))),l.a.createElement("tbody",null,s.map((function(e){return l.a.createElement(te,{key:e,row:e,players:u,onClick:c,activePlayer:m})})),l.a.createElement("tr",null,l.a.createElement(W.a,{desc:Object(A.b)("GIMMICK.bonus"),short:"\ud83c\udf81",tag:"td"}),u.map((function(e){return l.a.createElement("td",{key:e.uuid},F.finishedMultiplier(e.points)?F.calculateBonus(e.points)||"\u2718":"")}))),o.map((function(e){return l.a.createElement(te,{key:e,row:e,players:u,onClick:c,activePlayer:m})})),l.a.createElement("tr",null,l.a.createElement(W.a,{desc:Object(A.b)("GIMMICK.sum"),short:"\u2211",tag:"td"}),u.map((function(e){return l.a.createElement("td",{key:e.uuid},F.calculateSum(e))}))))),a&&l.a.createElement(Z,{gimmickRow:a,close:i}))},ce=function(e){var t=e.started;return l.a.createElement(u.a,null,l.a.createElement(m.a,{onClick:F.undo}),t&&l.a.createElement(s.a,{onClick:F.restart}))};t.default=function(){var e=S((function(e){return!!e.players.length}));return l.a.createElement(i.a,{fix:F.restart},l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"gimmick"},e?l.a.createElement(ae,null):l.a.createElement(J,null)),l.a.createElement(ce,{started:e})))}}}]);